# Wan2.1 Gradioç•Œé¢ - ç‰ˆæœ¬è¯´æ˜

## æ¦‚è¿°

ç”±äºGradioç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼Œæˆ‘ä»¬æä¾›äº†å¤šä¸ªç‰ˆæœ¬çš„å®ç°æ¥è§£å†³è¿›åº¦æ¡ä¸æ›´æ–°çš„é—®é¢˜ã€‚

## ğŸ“ **æ–‡ä»¶ç»“æ„**

```
gradio/
â”œâ”€â”€ t2v_1.3B_singleGPU.py              # åŸå§‹ç‰ˆæœ¬ï¼ˆæœ‰è¿›åº¦æ¡é—®é¢˜ï¼‰
â”œâ”€â”€ t2v_1.3B_singleGPU_new.py          # æ–°ç‰ˆæœ¬ï¼ˆéœ€è¦Gradio 5.0+çš„trackæ–¹æ³•ï¼‰
â”œâ”€â”€ t2v_1.3B_singleGPU_compatible.py   # å…¼å®¹ç‰ˆæœ¬ï¼ˆé€‚ç”¨äºå½“å‰Gradioç‰ˆæœ¬ï¼‰
â””â”€â”€ ...
```

## ğŸ” **ç‰ˆæœ¬å…¼å®¹æ€§åˆ†æ**

### å½“å‰ç¯å¢ƒ
- **Gradioç‰ˆæœ¬**: 5.33.0
- **å¯ç”¨API**: `progress()`, `track_tqdm()`, `update()` ç­‰
- **ç¼ºå¤±API**: `progress.track()` (éœ€è¦æ›´æ–°ç‰ˆæœ¬)

### ç‰ˆæœ¬å¯¹æ¯”

| ç‰ˆæœ¬ | Gradioè¦æ±‚ | è¿›åº¦æ¡æ›´æ–° | ä»£ç å¤æ‚åº¦ | æ¨èåº¦ |
|------|------------|------------|------------|--------|
| **åŸå§‹ç‰ˆæœ¬** | 5.0+ | âŒ å¡åœ¨10% | â­â­â­â­ | âŒ |
| **æ–°ç‰ˆæœ¬** | 5.0+ + trackæ–¹æ³• | âœ… å®æ—¶æ›´æ–° | â­ | ğŸ¥‡ **æ¨è** |
| **å…¼å®¹ç‰ˆæœ¬** | 5.0+ | âœ… å®æ—¶æ›´æ–° | â­â­ | ğŸ¥ˆ **å½“å‰å¯ç”¨** |

## ğŸš€ **æ¨èä½¿ç”¨æ–¹æ¡ˆ**

### 1. **é¦–é€‰ï¼šå‡çº§Gradioç‰ˆæœ¬ï¼ˆæ¨èï¼‰**

```bash
# å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬
pip install --upgrade gradio

# ç„¶åä½¿ç”¨æ–°ç‰ˆæœ¬
python gradio/t2v_1.3B_singleGPU_new.py
```

**ä¼˜åŠ¿**:
- ä»£ç æœ€ç®€æ´ï¼ˆçº¦20è¡Œï¼‰
- æœ€ç¨³å®šå¯é 
- å®˜æ–¹æ”¯æŒ

### 2. **å½“å‰å¯ç”¨ï¼šå…¼å®¹ç‰ˆæœ¬**

```bash
# ä½¿ç”¨å…¼å®¹ç‰ˆæœ¬
python gradio/t2v_1.3B_singleGPU_compatible.py
```

**ç‰¹ç‚¹**:
- å…¼å®¹å½“å‰Gradioç‰ˆæœ¬
- è¿›åº¦æ¡æ­£å¸¸å·¥ä½œ
- ä»£ç ç›¸å¯¹ç®€æ´ï¼ˆçº¦50è¡Œï¼‰

## ğŸ”§ **å…¼å®¹ç‰ˆæœ¬å®ç°åŸç†**

### æ ¸å¿ƒæ¶æ„
```python
# ä½¿ç”¨çº¿ç¨‹æ±  + é˜Ÿåˆ—æœºåˆ¶
with ThreadPoolExecutor(max_workers=2) as executor:
    
    # æäº¤ç”Ÿæˆä»»åŠ¡
    future = executor.submit(generate_video_worker)
    
    # å¯åŠ¨è¿›åº¦ç›‘æ§
    monitor_future = executor.submit(progress_monitor)
    
    # ç­‰å¾…å®Œæˆ
    video_result = future.result()
    monitor_future.result()
```

### è¿›åº¦æ›´æ–°æµç¨‹
```
Wan2.1æ‰©æ•£è¿‡ç¨‹ â†’ è¿›åº¦å›è°ƒ â†’ é˜Ÿåˆ— â†’ è¿›åº¦ç›‘æ§çº¿ç¨‹ â†’ Gradioè¿›åº¦æ¡
     â†“              â†“        â†“        â†“           â†“
  åå°çº¿ç¨‹     åå°çº¿ç¨‹   çº¿ç¨‹é—´é€šä¿¡  ç›‘æ§çº¿ç¨‹     UIæ›´æ–°
```

## ğŸ“Š **è¿›åº¦æ˜¾ç¤ºæ•ˆæœ**

### å…¼å®¹ç‰ˆæœ¬
```
åˆå§‹åŒ–æ¨¡å‹... - 2%
æ‰©æ•£æ­¥éª¤ 1/50 (æ—¶é—´æ­¥: 1000.00) - 3.8%
æ‰©æ•£æ­¥éª¤ 2/50 (æ—¶é—´æ­¥: 980.00) - 5.6%
æ‰©æ•£æ­¥éª¤ 3/50 (æ—¶é—´æ­¥: 960.00) - 7.4%
...
æ‰©æ•£æ­¥éª¤ 50/50 (æ—¶é—´æ­¥: 20.00) - 90%
ç”Ÿæˆå®Œæˆï¼Œæ­£åœ¨ä¿å­˜... - 90%
è§†é¢‘ç”Ÿæˆå®Œæˆï¼ - 100%
```

## ğŸ¯ **æŠ€æœ¯ç‰¹ç‚¹å¯¹æ¯”**

### æ–°ç‰ˆæœ¬ï¼ˆéœ€è¦å‡çº§Gradioï¼‰
```python
# æœ€ç®€æ´çš„å®ç°
with progress.track(total=sd_steps, desc="æ‰©æ•£ç”Ÿæˆä¸­") as progress_tracker:
    
    def progress_callback(step, total_steps_count, current_timestep):
        progress_tracker(step + 1, total_steps_count, f"æ‰©æ•£æ­¥éª¤ {step + 1}/{total_steps_count}")
```

### å…¼å®¹ç‰ˆæœ¬ï¼ˆå½“å‰å¯ç”¨ï¼‰
```python
# ä½¿ç”¨çº¿ç¨‹æ± å’Œé˜Ÿåˆ—
def progress_callback(step, total_steps_count, current_timestep):
    progress_value = 0.02 + 0.88 * ((step + 1) / total_steps_count)
    progress_queue.put((progress_value, desc))

def progress_monitor():
    while not generation_complete.is_set():
        progress_update = progress_queue.get(timeout=0.1)
        progress(progress_update[0], progress_update[1])
```

## ğŸ“ **ä½¿ç”¨å»ºè®®**

### 1. **å¼€å‘ç¯å¢ƒ**
- ä½¿ç”¨å…¼å®¹ç‰ˆæœ¬ï¼š`t2v_1.3B_singleGPU_compatible.py`
- ç¡®ä¿è¿›åº¦æ¡æ­£å¸¸å·¥ä½œ
- åŠŸèƒ½å®Œæ•´ï¼Œç¨³å®šå¯é 

### 2. **ç”Ÿäº§ç¯å¢ƒ**
- å»ºè®®å‡çº§Gradioç‰ˆæœ¬
- ä½¿ç”¨æ–°ç‰ˆæœ¬ï¼š`t2v_1.3B_singleGPU_new.py`
- ä»£ç æœ€ç®€æ´ï¼Œç»´æŠ¤æ€§æœ€å¥½

### 3. **æµ‹è¯•éªŒè¯**
```bash
# æµ‹è¯•å…¼å®¹ç‰ˆæœ¬
python gradio/t2v_1.3B_singleGPU_compatible.py

# éªŒè¯è¿›åº¦æ¡æ˜¯å¦æ­£å¸¸æ›´æ–°
# æ£€æŸ¥æ§åˆ¶å°è¾“å‡º
# ç¡®è®¤ç•Œé¢è¿›åº¦æ¡å®æ—¶å˜åŒ–
```

## ğŸ‰ **æ€»ç»“**

è™½ç„¶å½“å‰Gradioç‰ˆæœ¬ä¸æ”¯æŒ`progress.track()`æ–¹æ³•ï¼Œä½†æˆ‘ä»¬å·²ç»æä¾›äº†å®Œå…¨å…¼å®¹çš„è§£å†³æ–¹æ¡ˆï¼š

1. **å…¼å®¹ç‰ˆæœ¬**ï¼šç«‹å³å¯ç”¨ï¼Œè¿›åº¦æ¡æ­£å¸¸å·¥ä½œ
2. **æ–°ç‰ˆæœ¬**ï¼šéœ€è¦å‡çº§Gradioï¼Œä½†ä»£ç æœ€ç®€æ´
3. **åŸå§‹ç‰ˆæœ¬**ï¼šå­˜åœ¨è¿›åº¦æ¡é—®é¢˜ï¼Œä¸æ¨èä½¿ç”¨

**å½“å‰æ¨èä½¿ç”¨å…¼å®¹ç‰ˆæœ¬ï¼Œç¡®ä¿è¿›åº¦æ¡æ­£å¸¸å·¥ä½œï¼**
